### ৯.১ - কাস্টম কোয়েরীর সাথে পরিচয়

একটা পেজে নির্দিষ্ট কিছু পোস্ট, যেমন:

- কোন একটা ট্যাগের লেটেস্ট পোস্টসমূহ দেখাতে,
- অথবা, সব ক্যাটাগরীর মধ্যে ২/৩টা ক্যাটাগরীর পোস্ট দেখাতে,
- অথবা, একাধিক অথরের মধ্যে প্রতিটি অথরের সর্বশেষ ৩টা পোস্ট দেখাতে

এ রকম অনেক কম্বিনেশন করে পোস্ট দেখাতে কাস্টম কোয়ারী ব্যবহার করা হয়ে থাকে।

### ৯.২ - কাস্টম কোয়েরী রান করা - Using setup_postdata()

অনেকগুলো উপায়ে কাস্টম কুয়েরী রান করা যায়। প্রথমে get_posts() ফাংশনটির ব্যবহার দেখানো হয়েছে।

```php
$_p = get_posts(
   array(
      'posts_per_page' => 2,
      'post__in' => array(40,42,46,31,38),
      'orderby' => 'post__in'
   )
);
```

বিস্তারিত পড়তে: https://codex.wordpress.org/Template_Tags/get_posts

get_posts() ফাংশন ব্যবহারের পর আর while লুপ ব্যবহার করা যাবে না। তার পরিবর্তে foreach লুপ চালাতে হবে। লুপের প্রথমেই setup_postdata() ফাংশন ব্যবহার করে কারেন্ট পোস্টকে কনটেক্সে আনতে হবে। তাহলে পোস্টের সাথে রিলেটেড ফাংশনগুলো অবিকল ব্যবহার করা যাবে। যেমন: get_the_ID(), the_ID(), the_post(), the_permalink(), ইত্যাদি।

**NOTE:** each( $_p as $post ) লুপের মধ্যে ভ্যারিয়েবলের এর নাম অবশ্যই $post রাখতে হবে।

কাস্টম কুয়েরী রান করার পরে foreach লুপের পর অবশ্যই wp_reset_postdata() ফাংশনটি ব্যবহার করতে হবে।

```php
wp_reset_postdata();
```

### ৯.৩ - কাস্টম কোয়েরীর পেজিনেশন

কাস্টম কুয়েরী পেজিনেশনের জন্য যে স্থানে পেজিনেশন দেখাবো, সেখানে নীচে কোড লিখতে হবে:

```php
echo paginate_links(
    array(
        'total' => ceil( count( $post_ids ) / $posts_per_page )
    )
);
```

কাস্টম কুয়েরীতে পেজিনেশনকে কাজ করানোর জন্য ২টা আর্গুমেন্ট পাস করতে হবে, $posts_per_page এবং $paged। কাস্টম কুয়েরীতে যতগুলো পোস্ট পুল করা হচ্ছে তাকে $posts_per_page দিয়ে ভাগ করে পেজিনেশনের পেজের লিংকগুলোকে ডিনামিক করা হচ্ছে।

Technically, the function can be used to create paginated link list for any area.

WP Ref Link: https://developer.wordpress.org/reference/functions/paginate_links/

```php
paginate_links( string|array $args = '' )
```
অনেকগুো আর্গুমেন্ট রয়েছে। কোডেক্স থেকে আর্গুমেন্টগুলো সম্পর্কে বিস্তারিত জানা যাবে।

### ৯.৪ - কাস্টম কোয়েরী তে setup_postdata() ইউজ না করে কিভাবে পোস্ট দেখানো যায়

setup_postdata() ফাংশন ব্যবহার করে পোস্টের বিভিন্ন এট্রিবিউট ব্যবহার করে কাস্টম পোস্টের লিস্ট দেখানো হচ্ছে। **এইটাই আইডিয়াল পদ্ধতি।**

এছাড়াও, **অন্যভাবে লিস্ট** দেখানো যায়।

foreach লুপের মধ্যে $post এ্যারে ভ্যারিয়েবলকে print_r দিয়ে ইন্সপেক্ট করে এর মধ্যে থাকা এট্রিবিউটগুলোকে দেখে নিতে হবে। এরপর এই এট্রিবিউটগুলো echo করে লিস্ট বানানো যাবে। যেমন:

```php
echo apply_filters( 'the_title', $post->post_title ); // -- Post title
echo esc_rul( $post->guid ); // - Post permalink
```

### ৯.৫ - কাস্টম কোয়েরীতে WP_Query ক্লাসের ব্যবহার 

WP_Query ক্লাস ব্যবহার ওয়ার্ডপ্রেসের কাস্টম কুয়েরীর একটি বিশাল সাম্রাজ্যে খুব ইফিশেয়েন্টলি কাজ করা যায়। নীচের লিংক থেকে WP_Query সম্পর্কে বিস্তারিত জানা যাবে।

https://codex.wordpress.org/Class_Reference/WP_Query

WP_Query ব্যবহার করে পোস্টের যে ডাটাসেট এ্যারে পাওয়া যায় যায়, তা have_posts ব্যবহার করে while লুপ দিয়ে ইটারেট করে প্রতিটি পোস্টের বিভিন্ন এ্যাট্রিবিউটকে ওয়েবসাইটে দেখানো যায়। ফলে পোস্ট রিলেটেড ওয়ার্ডপ্রেসের স্ট্যান্ডার্ড সকলগুলো ফাংশনই ব্যবহার করার যায়। যেমন, have_posts, the_post, the_title, the_ID, ইত্যাদি।

**নোট:** WP_Query ব্যবহার করে পাওয়া ডাটা লুপের মাধ্যমে দেখানো শেষ হওয়ার পরপরই ****অবশ্যই**** wp_reset_query() ব্যবহার করতে হবে।
