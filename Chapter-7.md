## ৭ চাইল্ড থিম

### ৭.১ - চাইল্ড থিমের ইন্ট্রোডাকশন, কি এবং কেন!

অরিজিনাল থিমে কোন পরিবর্তন করা যাবে না। কারণ, থিমের অথর নতুন কোন আপডেট দিলে ঐ থিমের উপরে চালানো সকল আপডেট নষ্ট হয়ে যাবে। তার চাইল্ড থিম ব্যবহার করা উচিত।

চাইল্ড থিম তৈরী করার সময় এর এ্যাসেটসমূহ যেমন: JS, CSS ম্যানেজ করার জন্য কি কি বিষয়ের দিকে নজর রাখতে হবে, তা নিয়ে এই চ্যাপাটারে আলোচনার করা হয়েছে।

### ৭.২ - একটি চাইল্ড থিম তৈরী করা

চাইল্ড থিম তৈরী করতে প্যারেন্ট থিমের নামের নামে "-child" (অর্থাৎ, alpha-child) নামের একটা ফোল্ডার খুলে তাতে style.css ফাইল তৈরী করতে হবে। এর মধ্যে নিচের মত করে ডিক্লারেশন লিখতে হবে:

```php
/*
Theme Name: Alpha Child
Template: alpha [1]
Theme URI:
Author: LWHH
Author URI: https://learnwith.hasinhayder.com
Description: Our First HyperMinimal Theme
Version: 1.0
License: GNU General Public License v2 or later
License URI: http://www.gnu.org/licenses/gpl-2.0.html
Tags: blog, education
Text Domain: alpha-child [2]
*/
```

[1] "Template:" নামের নতুন লাইনে একটি এন্ট্রি দিতে হবে। এর ভ্যালু হবে প্যারেন্ট থিমের text-domain। হুবহু কপি করে পেস্ট করতে হবে।

[2] "Text Domain: alpha-child" - এখানে শুধু "-child" যুক্ত করে দিতে হবে।

প্যারেন্ট থিমের কোন টেপপ্লেট ফাইলে পরিবর্তন করতে হবে, সেটা কপি করে নিয়ে এসে চাইল্ড থিমে পেস্ট করতে হবে। এরপর প্রয়োজনীয় মডিফিকেশন করতে হবে। যেমন, single.php ফাইলকে প্যারেন্ট থিম থেকে কপি করে এনে চাইল্ড থিমে পেস্ট করতে হবে।

```html
নোট: চাইল্ড থিমের সিএসএস লোড করতে না বলার পরও, চাইল্ড থিমের সিএসএস লোড হয়ে যাচ্ছে।
কারণ, প্যারেন্ট থিমের functions.php এ থাকা ”wp_enqueue_style( 'alpha', get_stylesheet_uri(), null, VERSION );” কারণে,
চাইল্ড থিমের সিএসএস অটোমেটিক্যালি লোড হয়ে যাবে।
```

### ৭.৩ - প্যারেন্ট থিমের টেমপ্লেট ফাইলগুলো চাইল্ড থিমে ওভাররাইড করা

প্যারেন্ট থিমের কোন ফাইল চাইল্ড থিমে ওভাররাইট করতে চাইলে একই ফোল্ডার স্ট্রাকচার চাইল্ড থিমের রাখতে হবে। যেমন: style.css থাকে থিমের রুট ফোল্ডারে, পোস্ট ফরম্যাটের ফাইলগুলো থাকে post-formats ফোল্ডারে, ইত্যাদি।

সুতরাং, চাইল্ড থিমে অডিও পোস্ট ফরম্যাট পরিবর্তন করতে চাইলে প্যারেন্ট থিম থেকে post-formats ফোল্ডারের content-audio.php ফাইল কপি করে চাইল্ড থিমে post-formats ফোল্ডারে পেস্ট করে, তারপরে মডিফাই করতে হবে।

### ৭.৪ - প্যারেন্ট থিমের কোন ফাংশন চাইল্ড থিমে ওভাররাইড করা

চাইল্ড থিমের functions.php ফাইল প্যারেন্ট থিমের আগে লোড হয়। তাই, প্যারেন্ট থিমের কোন ফাংশনকে চাইল্ড থিমের রিডিক্লেয়ার করলে PHP Fatal error দেখাবে।

এর থেকে পরিত্রান পেতে, প্যারেন্ট থিমের যে সব ফাংশন চাইল্ড থিমে রিডিক্লেয়ার করতে চাই, প্যারেন্ট থিমের ঐ সমস্ত ফাংশনকে !function_exists ফাংশন দিয়ে চেক করে নিতে হবে যে, এটা আগেই ডিক্লেয়ার করা হয়েছে কি না।

```php
if( !function_exists('alpha_about_page_template_banner') )
{
	function alpha_about_page_template_banner()
	{
		// code goes here
	}
}
```

### ৭.৫ - চাইল্ড থিমের অ্যাসেট ম্যানেজমেন্ট - ডিকিউ এবং ডিরেজিস্টার - খুবই ইম্পর্ট্যান্ট

একটি থিমে যখন কোন সিএসএস বা জেএস enqueue করা হয়, তখন যে নাম বা আইডেনটিফায়ার দিয়ে এনকিউ করা হয়, তা ওয়ার্ডপ্রেসের একটি এ্যাসেট হয়ে যায়, বা মনে রাখে।
চাইল্ড থিমে শুধু dequeue করাটাই যথেষ্ট নয়, করলেও ঐ আইডেনটিফায়ারটি এ্যাসেট থেকে মুছে যায় না।
একে অবশ্যই  deregister করতে হবে।
এরপর, enqueue করতে হবে।

নীচে কোড স্যাম্পল দেয়া হল:

```php
function alpha_child_assets_dequeue()
{
    wp_dequeue_style( 'alpha-style' );
    wp_deregister_style( 'alpha-style' );
    wp_enqueue_style( 'alpha-style', get_theme_file_uri('/assets/css/alpha.css') );
}
add_action( 'wp_enqueue_scripts', 'alpha_child_assets_dequeue', 14 );
```

প্যারেন্ট থিমে bootstrap সিএসএসকে এনকিউ করলে, তা ওয়ার্ডপ্রেসের নিজস্ব লাইব্রেরী থেকে বুটস্ট্যাপের সিএসএস বা জেএস কে লোড করে। যদি চাইল্ড থিমে কোন সিডিএন থেকে বা অন্য কোন সোর্স থেকে বুটস্ট্যাট সিএসএস ও জেএসকে লোড করার প্রয়োজন হয়, তবে তা নিচের মত করে লোড করতে হয়:

```php
function alpha_child_bootstrap_ed()
{
    wp_dequeue_style( 'bootstrap' );
    wp_deregister_style( 'bootstrap' );
    wp_enqueue_style( 'bootstrap', '//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.1/css/bootstrap.css' );
}
add_action( 'wp_enqueue_scripts', 'alpha_child_bootstrap_ed', 11 );
```

লক্ষ্য করি, wp_enqueue_scripts হুকে প্রায়োরিটি ব্যবহার করা হয়েছে। এনকিউ করা সিএসএস বা জেএস গুলো প্রায়োরিটি অনুযায়ী একের পর এক করে লোড হয়। কোন এ্যাসেটকে আগে বা পরে লোড করতে হলে, এই প্রায়োরিটি নাম্বারকে বেশি বা কম করে নিতে হবে।
